<!DOCTYPE html>
<html dir="ltr" lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>YoSinTV: Live Sports Player</title>
    
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&family=Merriweather:wght@700&display=swap">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <link rel="stylesheet" href="https://cdn.plyr.io/3.7.8/plyr.css" />

    <script>
    (function () {
        setTimeout(function () {
            (function(s, u, z, p) {
                s.src = u;
                s.setAttribute('data-zone', z);
                p.appendChild(s);
            })(document.createElement('script'), 'https://bvtpk.com/tag.min.js', 7463304, document.body || document.documentElement);
        }, 5000);
    })();
    </script>
  
    <style>
        :root {
            --primary-color: #4385d9;
            --secondary-color: #ffffff;
            --text-color: #333333;
            --background-color: #f5f7fa;
            --highlight-bg: #ffe082;
            --border-radius: 12px;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            --font-family: 'Poppins', sans-serif;
            --title-font: 'Merriweather', serif;
            --button-bg: #2e7d32;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: var(--font-family); background: var(--background-color); color: var(--text-color); line-height: 1.6; }
        .container { max-width: 1000px; margin: 0 auto; padding: 0 20px; width: 100%; }
        
        .header { background: var(--primary-color); padding: 7px 0; box-shadow: var(--shadow); position: sticky; top: 0; z-index: 1000; }
        .header .container { display: flex; justify-content: space-between; align-items: center; }
        .logo { font-family: var(--title-font); font-size: 28px; font-weight: 700; color: #fff; text-decoration: none; }

        .player-section { margin: 20px 0; background: var(--secondary-color); border-radius: var(--border-radius); padding: 20px; box-shadow: var(--shadow); }
        .player-wrapper { position: relative; background: #000; border-radius: 8px; overflow: hidden; aspect-ratio: 16/9; }
        iframe, .plyr, video { width: 100% !important; height: 100% !important; border: none; }
        .hidden { display: none !important; }

        .promo-link { display: flex; align-items: center; justify-content: center; gap: 10px; font-weight: 600; text-decoration: none; color: inherit; border: 2px solid #ccc; border-radius: 10px; padding: 12px; margin-bottom: 8px; font-size: 14px; }
        .disclaimer { text-align: center; margin: 10px 0; background: var(--highlight-bg); border-radius: 6px; padding: 5px; }
        .disclaimer-text { font-weight: 600; font-size: 18px; }

        /* Shared Container Style */
        .info-card { padding: 20px; background-color: var(--secondary-color); border-radius: 12px; box-shadow: var(--shadow); margin: 20px 0; }
        .card-title { font-size: 20px; font-weight: bold; color: #1f2937; margin-bottom: 12px; padding-bottom: 8px; border-bottom: 2px solid #e5e7eb; display: flex; align-items: center; gap: 8px; }
        .card-text { font-size: 14px; color: #4b5563; line-height: 1.7; }

        /* Match List */
        .match-list { display: flex; flex-direction: column; gap: 12px; }
        .match-card { display: flex; justify-content: space-between; align-items: center; padding: 12px 18px; background-color: #f9fafb; border-radius: 8px; text-decoration: none; color: inherit; border: 1px solid #e5e7eb; transition: 0.2s; }
        .match-card:hover { background-color: #f3f4f6; border-color: var(--primary-color); }
        .team-info { display: flex; align-items: center; gap: 12px; }
        .team-logo { height: 30px; width: 30px; border-radius: 50%; object-fit: contain; background: #fff; border: 1px solid #d1d5db; }
        .vs-text { font-weight: bold; color: #374151; font-size: 14px; }
        .match-countdown { font-size: 13px; font-weight: 600; color: #4b5563; }
        .text-red-600 { color: #dc2626; font-weight: bold; animation: blink 1.2s infinite; }

        @keyframes blink { 0% { opacity: 1; } 50% { opacity: 0.3; } 100% { opacity: 1; } }
        .footer-bottom { text-align: center; padding: 30px 20px; border-top: 1px solid #ddd; font-size: 13px; color: #888; margin-top: 20px; }
    </style>
</head>
<body>

    <header class="header">
        <div class="container"><a href="https://www.yosin-tv.net/" class="logo">YoSinTV</a></div>
    </header>

    <main class="container">
        <section class="player-section">
            <a href="https://www.cricfoot.net/?ads=live" class="promo-link">
                <span style="width:8px; height:8px; background:red; border-radius:50%; animation: blink 1.2s infinite;"></span> Watch Latest Highlights
            </a>
            <div class="disclaimer"><span class="disclaimer-text">Skip 1-2 Ads | Watch Peacefully</span></div>
            
            <div class="player-wrapper">
                <iframe id="iframe-player" class="hidden" allowfullscreen allow="autoplay; encrypted-media"></iframe>
                <video poster="https://web.cricfoot.net/logo.png" id="plyr-video" class="hidden" playsinline controls crossorigin="anonymous"></video>
                <div id="error-display" class="hidden" style="color:#fff; text-align:center; padding-top:20%;">
                    <h3>Select a match from the schedule below</h3>
                </div>
            </div>
            
            <button onclick="toggleFullscreen()" style="width:100%; margin-top:15px; padding:15px; background:var(--button-bg); color:#fff; border:none; border-radius:8px; cursor:pointer; font-weight: 700;">
                <i class="fas fa-expand"></i> Full Screen Mode
            </button>
        </section>

        <div id="yosintv-more-matches-container" class="info-card">
            <h3 class="card-title">ðŸ”¥ Live & Upcoming Matches</h3>
            <div id="more-matches-embed" class="match-list"></div>
            <div id="no-matches-embed" class="hidden" style="text-align:center; padding:20px; color:#888;">No matches found at the moment.</div>
        </div>

        <section class="info-card">
            <h3 class="card-title"><i class="fas fa-shield-alt"></i> YoSinTV - DMCA</h3>
            <p class="card-text">
                YoSinTV does not host any media content on its own site. Our site visitors may use external or third-party services to show content. We notify all copyright owners that the links and media shared by visitors are hosted elsewhere on the web or embedded from various sites.
            </p>
        </section>

        <section class="info-card">
            <h3 class="card-title"><i class="fas fa-info-circle"></i> What is YoSinTV?</h3>
            <p class="card-text">
                YoSinTV is a sports streaming platform covering Cricket Matches, World Cup, International/Domestic Matches, Football Matches, and more.
            </p>
        </section>

        <footer class="footer-bottom">
            <p>Â© 2025 YoSinTV. All rights reserved.</p>
        </footer>
    </main>

    <script src="https://cdn.plyr.io/3.7.8/plyr.polyfilled.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <script src="https://cdn.dashjs.org/latest/dash.all.min.js"></script>

    <script>
        /** --- 1. Utility & Base64 Core --- **/
        const normalize = s => s.toString().toLowerCase().normalize('NFKD').replace(/[\u0300-\u036f]/g, '').replace(/&/g, 'and').replace(/[^a-z0-9]/g, '');
        const encodeB64 = (str) => btoa(encodeURIComponent(str).replace(/%([0-9A-F]{2})/g, (m, p1) => String.fromCharCode('0x' + p1))).replace(/\+/g, '-').replace(/\//g, '_').replace(/=+$/, '');
        const decodeB64 = (str) => {
            try {
                let b = str.replace(/-/g, '+').replace(/_/g, '/');
                while (b.length % 4) b += '=';
                return decodeURIComponent(Array.prototype.map.call(atob(b), (c) => '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2)).join(''));
            } catch (e) { return null; }
        };

        const getMatchCountdown = (startIso) => {
            const startMs = new Date(startIso).getTime();
            const now = Date.now();
            const diff = startMs - now;
            if (diff < 0) {
                if (Math.abs(diff) < 4 * 3600000) return '<span class="text-red-600">LIVE NOW</span>';
                return '<span style="color:#9ca3af">Finished</span>';
            }
            const s = Math.floor(diff / 1000), m = Math.floor(s / 60), h = Math.floor(m / 60), d = Math.floor(h / 24);
            if (d > 0) return `${d}d ${h % 24}h`;
            if (h > 0) return `${h}h ${m % 60}m`;
            if (m > 0) return `${m}m ${s % 60}s`;
            return `${s}s`;
        };

        /** --- 2. Player Loading Engine --- **/
        function loadMedia(url) {
            if (!url) return;
            const video = document.getElementById('plyr-video');
            const iframe = document.getElementById('iframe-player');
            const isStream = /\.(m3u8|mpd|mp4|webm)($|\?)/i.test(url);

            video.classList.add('hidden');
            iframe.classList.add('hidden');

            if (isStream) {
                video.classList.remove('hidden');
                new Plyr(video);
                if (url.includes('.m3u8') && Hls.isSupported()) {
                    const hls = new Hls(); hls.loadSource(url); hls.attachMedia(video);
                } else if (url.includes('.mpd')) {
                    dashjs.MediaPlayer().create().initialize(video, url, true);
                } else { video.src = url; }
            } else {
                iframe.src = url;
                iframe.classList.remove('hidden');
            }
        }

        /** --- 3. Main Init Logic --- **/
        const mainApis = ['https://www.yosintv.link/api/cricket.json', 'https://www.yosintv.link/api/football.json'];

        async function init() {
            const urlParams = new URLSearchParams(window.location.search);
            const slug = urlParams.get('yosintv');
            let rawSrc = urlParams.get('src');

            let allMatches = [];
            for (const api of mainApis) {
                try {
                    const r = await fetch(api);
                    const json = await r.json();
                    allMatches.push(...(json.matches || []));
                } catch(e) {}
            }

            if (rawSrc) {
                let finalUrl;
                if (rawSrc.startsWith('http')) {
                    finalUrl = rawSrc;
                    const encoded = encodeB64(rawSrc);
                    window.history.replaceState({}, '', '?src=' + encoded);
                } else {
                    finalUrl = decodeB64(rawSrc);
                }
                loadMedia(finalUrl);
            } 
            else if (slug) {
                const currentMatch = allMatches.find(m => {
                    const matchSlug = m.details_url ? new URLSearchParams(m.details_url.split('?')[1]).get('yosintv') : normalize(m.team1 + 'vs' + m.team2).replace(/vs/g, '');
                    return matchSlug === slug;
                });
                if (currentMatch) loadMedia(currentMatch.stream_url);
                else document.getElementById('error-display').classList.remove('hidden');
            } 
            else {
                document.getElementById('error-display').classList.remove('hidden');
            }

            const more = document.getElementById('more-matches-embed');
            const others = allMatches
                .filter(m => new Date(m.start).getTime() > Date.now() - 14400000)
                .sort(() => 0.5 - Math.random())
                .slice(0, 6);

            if (others.length === 0) {
                document.getElementById('no-matches-embed').classList.remove('hidden');
            } else {
                others.forEach(m => {
                    const mSlug = m.details_url ? new URLSearchParams(m.details_url.split('?')[1]).get('yosintv') : normalize(m.team1 + 'vs' + m.team2).replace(/vs/g, '');
                    const card = document.createElement('a');
                    card.href = `https://blog.cricfoot.net/?yosintv=${mSlug}`;
                    card.className = 'match-card';
                    card.innerHTML = `
                        <span class="team-info">
                            <img src="${m.team1_logo}" class="team-logo" onerror="this.src='https://via.placeholder.com/30'">
                            <span class="vs-text"> vs </span>
                            <img src="${m.team2_logo}" class="team-logo" onerror="this.src='https://via.placeholder.com/30'">
                        </span>
                        <span class="match-countdown" data-start="${m.start}">${getMatchCountdown(m.start)}</span>`;
                    more.appendChild(card);
                });
                setInterval(() => {
                    document.querySelectorAll('.match-countdown').forEach(span => {
                        const start = span.getAttribute('data-start');
                        if (start) span.innerHTML = getMatchCountdown(start);
                    });
                }, 1000);
            }
        }

        function toggleFullscreen() {
            const el = document.querySelector('.player-wrapper');
            if (el.requestFullscreen) el.requestFullscreen();
            else if (el.webkitRequestFullscreen) el.webkitRequestFullscreen();
        }

        window.addEventListener('DOMContentLoaded', init);

// Domain restriction check
(function() {
  const allowedDomains = ['www.livesoccertvhd.com', 'dplayerr.blogspot.com/', 'ads1-yosintv.pages.dev' ]; // Added 'localhost' for testing
  const currentDomain = window.location.hostname.toLowerCase().split(':')[0]; // Normalize domain, remove port

  if (!allowedDomains.includes(currentDomain)) {
    // Redirect to the main allowed domain
    window.location.replace('https://www.yosin-tv.net/');
  } else {
    // Allowed domain - place your code here
    console.log('Domain allowed:', currentDomain);
    // Your main code logic can go here
  }
})();
    </script>
  
    <div style="position:fixed;top:0;left:0;width:100%;height:1px;overflow:hidden;visibility:hidden;z-index:9999;">
        <script type="text/javascript" src="//widget.supercounters.com/ssl/online_i.js"></script>
        <script type="text/javascript">sc_online_i(1687371,"ffffff","e61c1c");</script>
        <br><noscript><a href="https://www.supercounters.com/">free online counter</a></noscript>
    </div>

    <script>
    (function() {
      const REDIRECT_KEY = "lastRedirectTime"; 
      const REDIRECT_URL = "https://yosintv-api.pages.dev/api/ads"; 
      const DELAY = 70 * 1000; 
      const COOLDOWN = 5 * 60 * 60 * 1000; 

      const lastRedirectTime = localStorage.getItem(REDIRECT_KEY);
      const now = Date.now();

      if (!lastRedirectTime || (now - parseInt(lastRedirectTime, 10)) >= COOLDOWN) {
        setTimeout(() => {
          localStorage.setItem(REDIRECT_KEY, Date.now().toString());
          window.location.href = REDIRECT_URL;
        }, DELAY);
      }
    })();
    </script>
</body>
</html>
